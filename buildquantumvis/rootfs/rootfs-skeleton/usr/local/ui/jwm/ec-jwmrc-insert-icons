#!/bin/ash
#20220214 based on jwmrc-insert-icons, but want less icons when running in container.
#  called from .control/${DB_nameonly}.run-once-top in container, which was generated by dir2sfs
#  also generated for easy.sfs by 3buildeasydistro
#20230720 change exec:dotpup to exec:pkgget

export TEXTDOMAIN=ui-jwm
export OUTPUT_CHARSET=UTF-8

if [ ! -f /root/.jwm/ec-tray-icons ];then
 LABEL='popup'
 mFILES="$(gettext 'files')"
 mWWW="$(gettext 'www')"
 mAPPS="$(gettext 'apps')"
 mSETUP="$(gettext 'setup')"
 mEDIT="$(gettext 'edit')"
 mCONSOLE="$(gettext 'console')"
 mCONNECT="$(gettext 'connect')"
 mSHARE="$(gettext 'share')"
 mUPDATE="$(gettext 'update')"
 echo "		<TrayButton ${LABEL}=\"${mFILES}\" icon=\"folder48.png\">exec:/usr/local/bin/rox --dir=/files</TrayButton>
		<TrayButton ${LABEL}=\"${mWWW}\" icon=\"www48.png\">exec:defaultbrowser</TrayButton>
		<TrayButton ${LABEL}=\"${mAPPS}\" icon=\"apps48.png\">exec:easyapps</TrayButton>
		<TrayButton ${LABEL}=\"pkgget\" icon=\"pet48.png\">exec:pkgget</TrayButton>
		<TrayButton ${LABEL}=\"${mSETUP}\" icon=\"configuration48.png\">exec:easysetup</TrayButton>
		<TrayButton ${LABEL}=\"${mEDIT}\" icon=\"edit48.png\">exec:defaulttexteditor</TrayButton>
		<TrayButton ${LABEL}=\"${mCONSOLE}\" icon=\"console48.png\">exec:defaultterminal</TrayButton>" > /root/.jwm/ec-tray-icons
fi

#insert file between two patterns in /root/.jwmrc-tray...
sed -i -e '/STARTICONS/,/ENDICONS/{/STARTICONS/!{/ENDICONS/!d}}' -e '/STARTICONS/r /root/.jwm/ec-tray-icons' /root/.jwmrc-tray

###end###
